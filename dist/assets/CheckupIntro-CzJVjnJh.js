import{r as t,j as e}from"./vendor-radix-J7BmBqsC.js";import{s as P,H as E,P as F,B as f}from"./index-CsvxaYtI.js";import{CHECKUP_MAX_AGE as m,CHECKUP_MIN_AGE as d,getProfile as k,isEligibleForCheckup as w}from"./profileStorage-CU3CxDLE.js";import{u as A}from"./useAssessment-B2u30bjB.js";import{c as S}from"./checkupQuestions-CelrvA-2.js";import{a as h,c as I}from"./friendly-and-clean-face-of-a-white-boy-7-yo--soft- (1)-BoJK1GJM.js";import{u as M,e as z}from"./vendor-react-CI1J5nwZ.js";import"./vendor-charts-CkgrveCd.js";import"./vendor-query-Bb981xLV.js";import"./assessmentStorage-kMcQQ0-2.js";const l=S.length;function R(){const i=M(),p=z(),{currentProfileId:j}=P(),[s,b]=t.useState(null),[$,u]=t.useState(!0),[a,N]=t.useState(null),r=p.profileId||j,{currentStep:x,savedAnswers:c,loading:g}=A({assessmentType:"checkup",totalSteps:l,profileId:r}),v=t.useMemo(()=>c.size/l*100,[c.size]),y=t.useMemo(()=>Math.min(x,l),[x]),_=t.useCallback(n=>n?n.gender==="male"?I:h:h,[]);return t.useEffect(()=>{async function n(){if(r)try{const o=await k(r);if(b(o),o){const C=w(o.dob);N(C)}}catch(o){console.error("Error loading profile:",o)}finally{u(!1)}else u(!1)}n()},[r]),e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(E,{}),e.jsx("div",{className:"border-b border-border bg-muted/30 py-4",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(F,{value:v,className:"flex-1"}),e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:g?"...":`${y} / ${l}`})]})})}),e.jsx("div",{className:"container mx-auto max-w-2xl px-4 py-20",children:e.jsxs("div",{className:"space-y-12 text-center",children:[e.jsx("img",{src:_(s),alt:s?`${s.first_name}`:"Ребенок",className:"mx-auto h-80 w-80 rounded-full object-cover"}),a&&!a.eligible?e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-4xl font-bold text-foreground",children:a.reason==="too_young"?e.jsxs(e.Fragment,{children:[(s==null?void 0:s.first_name)||"Ребенок"," ещё слишком ",(s==null?void 0:s.gender)==="male"?"мал":"мала"," для чекапа"]}):a.reason==="too_old"?e.jsxs(e.Fragment,{children:["Чекап предназначен для детей до ",m," лет"]}):e.jsx(e.Fragment,{children:"Не указана дата рождения"})}),e.jsx("p",{className:"text-lg text-muted-foreground",children:a.reason==="too_young"?e.jsxs(e.Fragment,{children:["Наш чекап разработан для детей от ",d," до ",m," лет.",s!=null&&s.first_name?` ${s.first_name}`:" Ребенку"," сейчас ",a.age," ",a.age===1?"год":a.age&&a.age<5?"года":"лет",". Вы сможете пройти чекап, когда ",(s==null?void 0:s.gender)==="male"?"ему":"ей"," исполнится ",d," года."]}):a.reason==="too_old"?e.jsxs(e.Fragment,{children:["Наш чекап разработан для детей от ",d," до ",m," лет. Для взрослых мы предлагаем другие инструменты оценки."]}):e.jsx(e.Fragment,{children:"Пожалуйста, укажите дату рождения в профиле ребенка."})}),e.jsx(f,{size:"lg",variant:"outline",onClick:()=>i("/dashboard"),className:"h-14 w-full max-w-md text-base font-medium",children:"Вернуться на главную"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-4",children:e.jsx("h1",{className:"text-5xl font-bold text-foreground",children:s?e.jsxs(e.Fragment,{children:["Давайте сосредоточимся на ",e.jsx("span",{className:"font-bold",children:s.first_name}),"."]}):e.jsx(e.Fragment,{children:"Давайте сосредоточимся на ребенке."})})}),e.jsx(f,{size:"lg",onClick:()=>{i(r?`/checkup-questions/${r}`:"/checkup")},className:"h-14 w-full max-w-md text-base font-medium",disabled:g,children:c.size>0?"Продолжим":"Начнем"})]})]})})]})}export{R as default};
