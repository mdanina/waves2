import{r as a,j as e}from"./vendor-radix-CDHcN1cP.js";import{u as E}from"./vendor-query-DyYoeD25.js";import{u as P,k as V,C as _,S as H,I as j,a as v,b as N,c as y,d as S,e as t,B as C,p as L,f as k}from"./index-Dt6uKTGi.js";import{R as h}from"./Radio-Cc-G03YK.js";import{B as Q}from"./birth-date-picker-Bps1FAwS.js";import{u as G,a as K}from"./vendor-react-D0zZO7ze.js";import"./vendor-charts-DMFz3Lzq.js";import"./vendor-date-CR4liJ_d.js";function ee(){const r=G(),f=K(),w=E(),{user:l}=P(),[i,B]=a.useState(""),[n,F]=a.useState(""),[o,I]=a.useState(""),[c,R]=a.useState(""),[d,q]=a.useState(""),[u,D]=a.useState(""),[g,z]=a.useState(""),[m,O]=a.useState(""),[x,b]=a.useState(!1),Y=async s=>{var p;if(s.preventDefault(),!x&&i&&n&&o&&c&&d&&m)try{b(!0),await L({firstName:i,lastName:n,dateOfBirth:o,relationship:c,sex:d,handedness:u||void 0,referral:g,seekingCare:m}),await w.invalidateQueries({queryKey:["profiles",l==null?void 0:l.id]}),k.success("Член семьи успешно добавлен!"),((p=f.state)==null?void 0:p.from)==="cabinet"?r("/cabinet"):r("/family-members")}catch(A){console.error("Error creating profile:",A),k.error("Ошибка при добавлении члена семьи"),b(!1)}};return e.jsx("div",{className:"min-h-screen",style:{backgroundImage:`url(${V})`,backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:"fixed",backgroundRepeat:"no-repeat"},children:e.jsx("div",{className:"container mx-auto max-w-2xl px-4 py-12",children:e.jsx(_,{className:"rounded-[20px] border-2 bg-white p-8 shadow-[0_4px_20px_rgba(0,0,0,0.06)]",children:e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"text-center",children:e.jsx(H,{size:"2xl",className:"mb-4",children:"Расскажите нам больше о члене семьи"})}),e.jsxs("form",{onSubmit:Y,className:"space-y-6",children:[e.jsx(j,{id:"firstName",type:"text",label:"Имя *",value:i,onChange:s=>B(s.target.value),required:!0}),e.jsx(j,{id:"lastName",type:"text",label:"Фамилия *",value:n,onChange:s=>F(s.target.value),required:!0}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{htmlFor:"dateOfBirth",className:"text-sm font-medium text-foreground",children:["Дата рождения ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(Q,{id:"dateOfBirth",value:o,onChange:I,required:!0,fromYear:new Date().getFullYear()-100,toYear:new Date().getFullYear()})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{htmlFor:"relationship",className:"text-sm font-medium text-foreground",children:["Кем для вас приходится? ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(v,{value:c,onValueChange:R,children:[e.jsx(N,{id:"relationship",className:"h-14 text-base rounded-2xl border-2 border-muted bg-white/80 backdrop-blur-sm transition-all duration-200 focus:border-coral-light focus:outline-none focus:ring-0 data-[state=open]:border-coral-light",children:e.jsx(y,{placeholder:"Выберите"})}),e.jsxs(S,{className:"rounded-2xl",children:[e.jsx(t,{value:"child",children:"Ребенок"}),e.jsx(t,{value:"partner",children:"Партнер"}),e.jsx(t,{value:"other",children:"Другое"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"text-sm font-medium text-foreground",children:["Пол ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(h,{name:"sex",value:d,onChange:q,options:[{value:"male",label:"Мужской"},{value:"female",label:"Женский"}],className:"grid grid-cols-2 gap-4"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-sm font-medium text-foreground",children:"Левша или правша?"}),e.jsx(h,{name:"handedness",value:u,onChange:D,options:[{value:"right",label:"Правша"},{value:"left",label:"Левша"},{value:"ambidextrous",label:"Амбидекстр"}],className:"grid grid-cols-3 gap-4"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"referral",className:"text-sm font-medium text-foreground",children:"Пришел по направлению от организации?"}),e.jsxs(v,{value:g,onValueChange:z,children:[e.jsx(N,{id:"referral",className:"h-14 text-base rounded-2xl border-2 border-muted bg-white/80 backdrop-blur-sm transition-all duration-200 focus:border-coral-light focus:outline-none focus:ring-0 data-[state=open]:border-coral-light",children:e.jsx(y,{placeholder:"Нет направления"})}),e.jsxs(S,{className:"rounded-2xl",children:[e.jsx(t,{value:"no",children:"Нет направления"}),e.jsx(t,{value:"insurance",children:"Страховая компания"}),e.jsx(t,{value:"doctor",children:"Врач"}),e.jsx(t,{value:"school",children:"Школа"}),e.jsx(t,{value:"other",children:"Другое"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"text-sm font-medium text-foreground",children:["Этот член семьи будет проходить нейротренинг? ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(h,{name:"seekingCare",value:m,onChange:O,options:[{value:"yes",label:"Да"},{value:"no",label:"Нет"}],className:"grid grid-cols-2 gap-4"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(C,{type:"button",variant:"outline",size:"lg",onClick:()=>{var s;((s=f.state)==null?void 0:s.from)==="cabinet"?r("/cabinet"):r("/family-members")},className:"h-14 flex-1 text-base font-medium",children:"Назад"}),e.jsx(C,{type:"submit",size:"lg",disabled:x,className:"h-14 flex-1 text-base font-medium",children:x?"Добавление...":"Добавить"})]})]})]})})})})}export{ee as default};
