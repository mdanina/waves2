import{b as r,u as s,c as u}from"./vendor-query-DNK10Tnx.js";import{u as i,f as o}from"./index-BetUtCwY.js";import{c as l,a as f,b as d,d as F,e as h,f as T,i as q,j as g,k as A}from"./appointmentStorage-DwszACBB.js";function b(){return r({queryKey:["appointment-types"],queryFn:d,staleTime:10*60*1e3,gcTime:30*60*1e3,retry:2,refetchOnWindowFocus:!1})}function v(e){return r({queryKey:["appointment-type",e],queryFn:()=>e?F(e):Promise.resolve(null),enabled:!!e,staleTime:10*60*1e3,gcTime:30*60*1e3,retry:2,refetchOnWindowFocus:!1})}function K(){const{user:e}=i();return r({queryKey:["appointments-with-type",e==null?void 0:e.id],queryFn:()=>{if(!(e!=null&&e.id))throw new Error("User ID is required");return h(e.id)},enabled:!!(e!=null&&e.id),staleTime:2*60*1e3,gcTime:5*60*1e3,retry:2,refetchOnWindowFocus:!1,refetchOnMount:!0})}function W(e){return r({queryKey:["appointment",e],queryFn:()=>e?T(e):Promise.resolve(null),enabled:!!e,staleTime:2*60*1e3,gcTime:5*60*1e3,retry:2,refetchOnWindowFocus:!1})}function E(){const{user:e}=i();return r({queryKey:["active-free-consultation",e==null?void 0:e.id],queryFn:q,enabled:!!e,staleTime:1*60*1e3,gcTime:5*60*1e3,retry:2,refetchOnWindowFocus:!1,refetchOnMount:!0})}function M(){const{user:e}=i();return r({queryKey:["completed-free-consultation",e==null?void 0:e.id],queryFn:g,enabled:!!e,staleTime:5*60*1e3,gcTime:10*60*1e3,retry:2,refetchOnWindowFocus:!1,refetchOnMount:!0})}function k(){const{user:e}=i();return r({queryKey:["free-consultation-expiry",e==null?void 0:e.id],queryFn:A,enabled:!!e,staleTime:1*60*1e3,gcTime:5*60*1e3,retry:2,refetchOnWindowFocus:!1,refetchOnMount:!0})}function x(){const e=s(),{user:a}=i();return u({mutationFn:({appointmentTypeId:t,scheduledAt:n,profileId:c,notes:p,paymentId:m,specialistId:y})=>l(t,n,c,p,m,y),onSuccess:()=>{e.invalidateQueries({predicate:t=>{const n=t.queryKey[0];return n==="appointments"||n==="upcoming-appointments"||n==="appointments-with-type"||n==="active-free-consultation"}}),o.success("Консультация успешно записана")},onError:t=>{o.error(`Ошибка при записи на консультацию: ${t.message}`)}})}function Q(){const e=s(),{user:a}=i();return u({mutationFn:t=>f(t),onSuccess:()=>{e.invalidateQueries({predicate:t=>{const n=t.queryKey[0];return n==="appointments"||n==="upcoming-appointments"||n==="appointments-with-type"||n==="active-free-consultation"}}),o.success("Консультация отменена")},onError:t=>{o.error(`Ошибка при отмене консультации: ${t.message}`)}})}export{K as a,Q as b,b as c,M as d,k as e,v as f,x as g,W as h,E as u};
