import{r as d,j as e}from"./vendor-radix-ClAtPGFM.js";import{S as D,C as S,i as E,T as K,W as V,s as Q,B as w,U as N,z as Y,f as R,p as q,u as X,w as $}from"./index-BetUtCwY.js";import{u as Z}from"./useProfiles-yoc-XtR9.js";import{getDativeName as ee}from"./profileStorage-Bslow6L6.js";import{u as se}from"./vendor-react-C_NXOhYK.js";import"./vendor-charts-DLBwBPLi.js";import"./vendor-query-DNK10Tnx.js";const B=[{id:"concentration",title:"–ö–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è –≤–Ω–∏–º–∞–Ω–∏—è",description:"–°–ª–æ–∂–Ω–æ —É–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Ñ–æ–∫—É—Å –Ω–∞ –∑–∞–¥–∞—á–∞—Ö",icon:"üéØ",questions:[{id:"concentration_frequency",text:"–ö–∞–∫ —á–∞—Å—Ç–æ –≤–æ–∑–Ω–∏–∫–∞—é—Ç —Ç—Ä—É–¥–Ω–æ—Å—Ç–∏ —Å –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏–µ–π?",type:"single",options:[{id:"rarely",label:"–†–µ–¥–∫–æ",value:1},{id:"sometimes",label:"–ò–Ω–æ–≥–¥–∞",value:2},{id:"often",label:"–ß–∞—Å—Ç–æ",value:3},{id:"always",label:"–ü–æ—Å—Ç–æ—è–Ω–Ω–æ",value:4}]},{id:"concentration_situations",text:"–í –∫–∞–∫–∏—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö —ç—Ç–æ –ø—Ä–æ—è–≤–ª—è–µ—Ç—Å—è?",type:"multiple",options:[{id:"study",label:"–£—á—ë–±–∞ / —É—Ä–æ–∫–∏",value:"study"},{id:"reading",label:"–ß—Ç–µ–Ω–∏–µ –∫–Ω–∏–≥",value:"reading"},{id:"homework",label:"–î–æ–º–∞—à–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è",value:"homework"},{id:"conversations",label:"–†–∞–∑–≥–æ–≤–æ—Ä—ã",value:"conversations"},{id:"games",label:"–ò–≥—Ä—ã / —Ö–æ–±–±–∏",value:"games"},{id:"work",label:"–†–∞–±–æ—Ç–∞",value:"work"}]},{id:"concentration_duration",text:"–ö–∞–∫ –¥–∞–≤–Ω–æ —ç—Ç–æ –±–µ—Å–ø–æ–∫–æ–∏—Ç?",type:"single",options:[{id:"recent",label:"–ù–µ–¥–∞–≤–Ω–æ (–¥–æ –º–µ—Å—è—Ü–∞)",value:1},{id:"months",label:"–ù–µ—Å–∫–æ–ª—å–∫–æ –º–µ—Å—è—Ü–µ–≤",value:2},{id:"year",label:"–û–∫–æ–ª–æ –≥–æ–¥–∞",value:3},{id:"years",label:"–ë–æ–ª—å—à–µ –≥–æ–¥–∞",value:4}]}]},{id:"activity",title:"–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é",description:"–°–ª–æ–∂–Ω–æ —É—Å–∏–¥–µ—Ç—å –Ω–∞ –º–µ—Å—Ç–µ, –º–Ω–æ–≥–æ —ç–Ω–µ—Ä–≥–∏–∏",icon:"‚ö°",questions:[{id:"activity_frequency",text:"–ö–∞–∫ —á–∞—Å—Ç–æ —Å–ª–æ–∂–Ω–æ —É—Å–∏–¥–µ—Ç—å –Ω–∞ –º–µ—Å—Ç–µ?",type:"single",options:[{id:"rarely",label:"–†–µ–¥–∫–æ",value:1},{id:"sometimes",label:"–ò–Ω–æ–≥–¥–∞",value:2},{id:"often",label:"–ß–∞—Å—Ç–æ",value:3},{id:"always",label:"–ü–æ—Å—Ç–æ—è–Ω–Ω–æ",value:4}]},{id:"activity_manifestation",text:"–ö–∞–∫ —ç—Ç–æ –æ–±—ã—á–Ω–æ –ø—Ä–æ—è–≤–ª—è–µ—Ç—Å—è?",type:"multiple",options:[{id:"fidgeting",label:"–Å—Ä–∑–∞–Ω–∏–µ, –ø–æ—Å—Ç—É–∫–∏–≤–∞–Ω–∏–µ",value:"fidgeting"},{id:"standing",label:"–í—Å—Ç–∞—ë—Ç, –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ —Å–∏–¥–µ—Ç—å",value:"standing"},{id:"running",label:"–ë–µ–≥–∞–µ—Ç, –∫–æ–≥–¥–∞ –Ω–µ—É–º–µ—Å—Ç–Ω–æ",value:"running"},{id:"talking",label:"–ú–Ω–æ–≥–æ –≥–æ–≤–æ—Ä–∏—Ç",value:"talking"},{id:"restless",label:"–í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ –±–µ—Å–ø–æ–∫–æ–π—Å—Ç–≤–æ",value:"restless"}]},{id:"activity_impact",text:"–ù–∞—Å–∫–æ–ª—å–∫–æ —ç—Ç–æ –º–µ—à–∞–µ—Ç –≤ –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω–æ–π –∂–∏–∑–Ω–∏?",type:"single",options:[{id:"not_much",label:"–ü–æ—á—Ç–∏ –Ω–µ –º–µ—à–∞–µ—Ç",value:1},{id:"slightly",label:"–ù–µ–º–Ω–æ–≥–æ –º–µ—à–∞–µ—Ç",value:2},{id:"moderately",label:"–£–º–µ—Ä–µ–Ω–Ω–æ –º–µ—à–∞–µ—Ç",value:3},{id:"significantly",label:"–°–∏–ª—å–Ω–æ –º–µ—à–∞–µ—Ç",value:4}]}]},{id:"anxiety",title:"–°–Ω–∏–∂–µ–Ω–∏–µ —Ç—Ä–µ–≤–æ–∂–Ω–æ—Å—Ç–∏",description:"–ë–µ—Å–ø–æ–∫–æ–π—Å—Ç–≤–æ, –≤–æ–ª–Ω–µ–Ω–∏–µ, –ø–µ—Ä–µ–∂–∏–≤–∞–Ω–∏—è",icon:"üòå",questions:[{id:"anxiety_frequency",text:"–ö–∞–∫ —á–∞—Å—Ç–æ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç —á—É–≤—Å—Ç–≤–æ —Ç—Ä–µ–≤–æ–≥–∏?",type:"single",options:[{id:"rarely",label:"–†–µ–¥–∫–æ",value:1},{id:"sometimes",label:"–ò–Ω–æ–≥–¥–∞",value:2},{id:"often",label:"–ß–∞—Å—Ç–æ",value:3},{id:"always",label:"–ü–æ—á—Ç–∏ –≤—Å–µ–≥–¥–∞",value:4}]},{id:"anxiety_triggers",text:"–ß—Ç–æ –æ–±—ã—á–Ω–æ –≤—ã–∑—ã–≤–∞–µ—Ç —Ç—Ä–µ–≤–æ–≥—É?",type:"multiple",options:[{id:"school",label:"–®–∫–æ–ª–∞ / —É—á—ë–±–∞",value:"school"},{id:"social",label:"–û–±—â–µ–Ω–∏–µ —Å –ª—é–¥—å–º–∏",value:"social"},{id:"new_situations",label:"–ù–æ–≤—ã–µ —Å–∏—Ç—É–∞—Ü–∏–∏",value:"new_situations"},{id:"performance",label:"–í—ã—Å—Ç—É–ø–ª–µ–Ω–∏—è, –æ—Ü–µ–Ω–∫–∞",value:"performance"},{id:"separation",label:"–†–∞–∑–ª—É–∫–∞ —Å –±–ª–∏–∑–∫–∏–º–∏",value:"separation"},{id:"no_reason",label:"–ë–µ–∑ –≤–∏–¥–∏–º–æ–π –ø—Ä–∏—á–∏–Ω—ã",value:"no_reason"}]},{id:"anxiety_physical",text:"–ï—Å—Ç—å –ª–∏ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ—è–≤–ª–µ–Ω–∏—è?",type:"multiple",options:[{id:"heart",label:"–£—á–∞—â—ë–Ω–Ω–æ–µ —Å–µ—Ä–¥—Ü–µ–±–∏–µ–Ω–∏–µ",value:"heart"},{id:"sweating",label:"–ü–æ—Ç–ª–∏–≤–æ—Å—Ç—å",value:"sweating"},{id:"stomach",label:"–î–∏—Å–∫–æ–º—Ñ–æ—Ä—Ç –≤ –∂–∏–≤–æ—Ç–µ",value:"stomach"},{id:"tension",label:"–ú—ã—à–µ—á–Ω–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ",value:"tension"},{id:"none",label:"–ù–µ—Ç —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ—è–≤–ª–µ–Ω–∏–π",value:"none"}]}]},{id:"sleep",title:"–ö–∞—á–µ—Å—Ç–≤–æ —Å–Ω–∞",description:"–¢—Ä—É–¥–Ω–æ—Å—Ç–∏ —Å –∑–∞—Å—ã–ø–∞–Ω–∏–µ–º, –±–µ—Å–ø–æ–∫–æ–π–Ω—ã–π —Å–æ–Ω",icon:"üåô",questions:[{id:"sleep_problems",text:"–ö–∞–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å–æ —Å–Ω–æ–º –±–µ—Å–ø–æ–∫–æ—è—Ç?",type:"multiple",options:[{id:"falling_asleep",label:"–¢—Ä—É–¥–Ω–æ –∑–∞—Å–Ω—É—Ç—å",value:"falling_asleep"},{id:"staying_asleep",label:"–ü—Ä–æ—Å—ã–ø–∞–µ—Ç—Å—è –Ω–æ—á—å—é",value:"staying_asleep"},{id:"early_wake",label:"–ü—Ä–æ—Å—ã–ø–∞–µ—Ç—Å—è —Å–ª–∏—à–∫–æ–º —Ä–∞–Ω–æ",value:"early_wake"},{id:"not_rested",label:"–ù–µ —á—É–≤—Å—Ç–≤—É–µ—Ç —Å–µ–±—è –æ—Ç–¥–æ—Ö–Ω—É–≤—à–∏–º",value:"not_rested"},{id:"nightmares",label:"–ö–æ—à–º–∞—Ä—ã",value:"nightmares"}]},{id:"sleep_frequency",text:"–ö–∞–∫ —á–∞—Å—Ç–æ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å–æ —Å–Ω–æ–º?",type:"single",options:[{id:"rarely",label:"–†–µ–¥–∫–æ (—Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é)",value:1},{id:"sometimes",label:"–ù–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é",value:2},{id:"often",label:"–ü–æ—á—Ç–∏ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å",value:3},{id:"always",label:"–ö–∞–∂–¥—ã–π –¥–µ–Ω—å",value:4}]},{id:"sleep_duration",text:"–°–∫–æ–ª—å–∫–æ –æ–±—ã—á–Ω–æ –¥–ª–∏—Ç—Å—è —Å–æ–Ω?",type:"single",options:[{id:"less_6",label:"–ú–µ–Ω–µ–µ 6 —á–∞—Å–æ–≤",value:1},{id:"6_7",label:"6-7 —á–∞—Å–æ–≤",value:2},{id:"7_8",label:"7-8 —á–∞—Å–æ–≤",value:3},{id:"more_8",label:"–ë–æ–ª–µ–µ 8 —á–∞—Å–æ–≤",value:4}]}]},{id:"impulsivity",title:"–ö–æ–Ω—Ç—Ä–æ–ª—å –∏–º–ø—É–ª—å—Å–∏–≤–Ω–æ—Å—Ç–∏",description:"–°–ª–æ–∂–Ω–æ —Å–¥–µ—Ä–∂–∏–≤–∞—Ç—å –ø–æ—Ä—ã–≤—ã –∏ —Ä–µ–∞–∫—Ü–∏–∏",icon:"üí™",questions:[{id:"impulsivity_frequency",text:"–ö–∞–∫ —á–∞—Å—Ç–æ –¥–µ–π—Å—Ç–≤—É–µ—Ç –Ω–µ –ø–æ–¥—É–º–∞–≤?",type:"single",options:[{id:"rarely",label:"–†–µ–¥–∫–æ",value:1},{id:"sometimes",label:"–ò–Ω–æ–≥–¥–∞",value:2},{id:"often",label:"–ß–∞—Å—Ç–æ",value:3},{id:"always",label:"–ü–æ—Å—Ç–æ—è–Ω–Ω–æ",value:4}]},{id:"impulsivity_manifestation",text:"–ö–∞–∫ —ç—Ç–æ –æ–±—ã—á–Ω–æ –ø—Ä–æ—è–≤–ª—è–µ—Ç—Å—è?",type:"multiple",options:[{id:"interrupts",label:"–ü–µ—Ä–µ–±–∏–≤–∞–µ—Ç –¥—Ä—É–≥–∏—Ö",value:"interrupts"},{id:"blurts",label:"–í—ã–∫—Ä–∏–∫–∏–≤–∞–µ—Ç –æ—Ç–≤–µ—Ç—ã",value:"blurts"},{id:"impatient",label:"–ù–µ –º–æ–∂–µ—Ç –∂–¥–∞—Ç—å —Å–≤–æ–µ–π –æ—á–µ—Ä–µ–¥–∏",value:"impatient"},{id:"risky",label:"–†–∏—Å–∫–æ–≤–∞–Ω–Ω—ã–µ –ø–æ—Å—Ç—É–ø–∫–∏",value:"risky"},{id:"emotional",label:"–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –≤—Å–ø—ã—à–∫–∏",value:"emotional"}]},{id:"impulsivity_consequences",text:"–ö –∫–∞–∫–∏–º –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è–º —ç—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç?",type:"multiple",options:[{id:"conflicts",label:"–ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Å –æ–∫—Ä—É–∂–∞—é—â–∏–º–∏",value:"conflicts"},{id:"regret",label:"–°–æ–∂–∞–ª–µ–Ω–∏–µ –æ —Å–∫–∞–∑–∞–Ω–Ω–æ–º/—Å–¥–µ–ª–∞–Ω–Ω–æ–º",value:"regret"},{id:"mistakes",label:"–û—à–∏–±–∫–∏ –ø–æ –Ω–µ–≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏",value:"mistakes"},{id:"injuries",label:"–¢—Ä–∞–≤–º—ã, –Ω–µ—Å—á–∞—Å—Ç–Ω—ã–µ —Å–ª—É—á–∞–∏",value:"injuries"},{id:"none",label:"–û—Å–æ–±—ã—Ö –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏–π –Ω–µ—Ç",value:"none"}]}]},{id:"emotional",title:"–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å",description:"–ü–µ—Ä–µ–ø–∞–¥—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è, —Ä–∞–∑–¥—Ä–∞–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å",icon:"üíö",questions:[{id:"emotional_frequency",text:"–ö–∞–∫ —á–∞—Å—Ç–æ –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ?",type:"single",options:[{id:"rarely",label:"–†–µ–¥–∫–æ",value:1},{id:"sometimes",label:"–ò–Ω–æ–≥–¥–∞",value:2},{id:"often",label:"–ß–∞—Å—Ç–æ",value:3},{id:"always",label:"–ù–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –≤ –¥–µ–Ω—å",value:4}]},{id:"emotional_manifestation",text:"–ö–∞–∫–∏–µ —ç–º–æ—Ü–∏–∏ —Å–ª–æ–∂–Ω–µ–µ –≤—Å–µ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å?",type:"multiple",options:[{id:"anger",label:"–ì–Ω–µ–≤, —Ä–∞–∑–¥—Ä–∞–∂–µ–Ω–∏–µ",value:"anger"},{id:"sadness",label:"–ì—Ä—É—Å—Ç—å, –ø–æ–¥–∞–≤–ª–µ–Ω–Ω–æ—Å—Ç—å",value:"sadness"},{id:"frustration",label:"–†–∞–∑–æ—á–∞—Ä–æ–≤–∞–Ω–∏–µ",value:"frustration"},{id:"excitement",label:"–ß—Ä–µ–∑–º–µ—Ä–Ω–æ–µ –≤–æ–∑–±—É–∂–¥–µ–Ω–∏–µ",value:"excitement"},{id:"sensitivity",label:"–û–±–∏–¥—á–∏–≤–æ—Å—Ç—å",value:"sensitivity"}]},{id:"emotional_triggers",text:"–ß—Ç–æ –æ–±—ã—á–Ω–æ –≤—ã–∑—ã–≤–∞–µ—Ç —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∞–∫—Ü–∏–∏?",type:"multiple",options:[{id:"criticism",label:"–ö—Ä–∏—Ç–∏–∫–∞, –∑–∞–º–µ—á–∞–Ω–∏—è",value:"criticism"},{id:"changes",label:"–ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–ª–∞–Ω–æ–≤",value:"changes"},{id:"failures",label:"–ù–µ—É–¥–∞—á–∏, –æ—à–∏–±–∫–∏",value:"failures"},{id:"fatigue",label:"–£—Å—Ç–∞–ª–æ—Å—Ç—å",value:"fatigue"},{id:"no_reason",label:"–ë–µ–∑ –≤–∏–¥–∏–º–æ–π –ø—Ä–∏—á–∏–Ω—ã",value:"no_reason"}]}]}];function G(t){return B.find(y=>y.id===t)}function le(t,y){let j=0,h=0;for(const o of t){const p=y[o]||[];for(const x of p)typeof x.value=="number"&&(j+=x.value,h++)}const u=h>0?j/h:2;let m="moderate",r=4,g=20;u<=1.5?(m="light",r=3,g=15):u>=3&&(m="intensive",r=5,g=25);const a=t.slice(0,2),i=[];return t.includes("concentration")&&i.push("–ù–∞—á–∏–Ω–∞–π—Ç–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –≤ —Ç–∏—Ö–æ–º –º–µ—Å—Ç–µ –±–µ–∑ –æ—Ç–≤–ª–µ–∫–∞—é—â–∏—Ö —Ñ–∞–∫—Ç–æ—Ä–æ–≤"),t.includes("activity")&&i.push("–ü–µ—Ä–µ–¥ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–æ–π –ø–æ–ª–µ–∑–Ω–æ —Å–¥–µ–ª–∞—Ç—å –Ω–µ–±–æ–ª—å—à—É—é —Ñ–∏–∑–∏—á–µ—Å–∫—É—é —Ä–∞–∑–º–∏–Ω–∫—É"),t.includes("anxiety")&&i.push("–ü—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ –≥–ª—É–±–æ–∫–æ–µ –¥—ã—Ö–∞–Ω–∏–µ –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Å–µ—Å—Å–∏–∏"),t.includes("sleep")&&i.push("–ü—Ä–æ–≤–æ–¥–∏—Ç–µ –≤–µ—á–µ—Ä–Ω—é—é —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É –∑–∞ 1-2 —á–∞—Å–∞ –¥–æ —Å–Ω–∞"),t.includes("impulsivity")&&i.push("–û—Ç–º–µ—á–∞–π—Ç–µ –º–æ–º–µ–Ω—Ç—ã, –∫–æ–≥–¥–∞ —É–¥–∞–ª–æ—Å—å —Å–¥–µ—Ä–∂–∞—Ç—å—Å—è ‚Äî —ç—Ç–æ —É—Å–∏–ª–∏—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å"),t.includes("emotional")&&i.push("–í–µ–¥–∏—Ç–µ –¥–Ω–µ–≤–Ω–∏–∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è, —á—Ç–æ–±—ã –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —É–ª—É—á—à–µ–Ω–∏—è"),{intensity:m,sessionsPerWeek:r,sessionDuration:g,focusAreas:a,tips:i}}function te(){const{user:t}=X(),y="waves_profile_goals",[j,h]=d.useState({});d.useEffect(()=>{if(!(t!=null&&t.id))return;(async()=>{try{const g=localStorage.getItem(`${y}_${t.id}`);g&&h(JSON.parse(g));const{data:a,error:i}=await $.from("profiles").select("id, training_goals").eq("user_id",t.id);if(i){q.error("Error loading training goals from DB:",i);return}if(a){const o={};a.forEach(p=>{p.training_goals&&(o[p.id]=p.training_goals)}),Object.keys(o).length>0&&h(p=>{const x={...o,...p};return localStorage.setItem(`${y}_${t.id}`,JSON.stringify(x)),x})}}catch(g){q.error("Error loading goals:",g)}})()},[t==null?void 0:t.id]);const u=d.useCallback(async(r,g)=>{if(!(t!=null&&t.id))return;const a={profileId:r,...g,updatedAt:new Date().toISOString()};h(i=>{const o={...i,[r]:a};return localStorage.setItem(`${y}_${t.id}`,JSON.stringify(o)),o});try{const{error:i}=await $.from("profiles").update({training_goals:a,updated_at:new Date().toISOString()}).eq("id",r);i?q.error("Error saving training goals to database:",i):q.log("Training goals saved to database successfully")}catch(i){q.error("Error saving training goals:",i)}},[t==null?void 0:t.id]),m=d.useCallback(r=>j[r]||null,[j]);return{goalsMap:j,saveGoals:u,getGoalsForProfile:m}}function ue(){se();const{data:t,isLoading:y}=Z(),{saveGoals:j,getGoalsForProfile:h}=te(),[u,m]=d.useState("select_profile"),[r,g]=d.useState(null),[a,i]=d.useState([]),[o,p]=d.useState(0),[x,_]=d.useState(0),[P,C]=d.useState({}),[f,A]=d.useState(null),c=d.useMemo(()=>a.length===0?null:G(a[o]),[a,o]),b=d.useMemo(()=>c?c.questions[x]:null,[c,x]),F=d.useMemo(()=>{if(a.length===0)return{current:0,total:0,percentage:0};let s=0,l=0;for(let n=0;n<a.length;n++){const v=G(a[n]);v&&(s+=v.questions.length,n<o?l+=v.questions.length:n===o&&(l+=x))}return{current:l,total:s,percentage:s>0?Math.round(l/s*100):0}},[a,o,x]),M=d.useMemo(()=>!r||!t?null:t.find(s=>s.id===r)||null,[r,t]),T=s=>{i(l=>l.includes(s)?l.filter(n=>n!==s):[...l,s])},O=s=>{!c||!b||C(l=>{const n=l[c.id]||[],v=n.findIndex(U=>U.questionId===b.id),k={questionId:b.id,value:s};return v>=0?n[v]=k:n.push(k),{...l,[c.id]:n}})},I=()=>{if(!c||!b)return;const l=(P[c.id]||[]).find(n=>n.questionId===b.id);return l==null?void 0:l.value},H=()=>{if(!c)return;if(x<c.questions.length-1){_(l=>l+1);return}if(o<a.length-1){p(l=>l+1),_(0);return}const s=le(a,P);A(s),m("results")},W=()=>{if(x>0){_(s=>s-1);return}if(o>0){const s=G(a[o-1]);p(l=>l-1),_(s?s.questions.length-1:0)}},J=async()=>{if(!(!r||!f))try{await j(r,{goals:a,answers:P,recommendations:f}),R.success("–¶–µ–ª–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!")}catch(s){q.error("Error saving goals:",s),R.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —Ü–µ–ª–µ–π")}},L=d.useMemo(()=>t?t.filter(s=>!h(s.id)):[],[t,h]),z=d.useMemo(()=>{switch(u){case"select_profile":return!!r;case"select_goals":return a.length>0;case"questionnaire":const s=I();return s!==void 0&&(Array.isArray(s)?s.length>0:!0);default:return!1}},[u,r,a,I]);return y?e.jsx("div",{className:"max-w-2xl mx-auto px-4 py-8",children:e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-muted-foreground",children:"–ó–∞–≥—Ä—É–∑–∫–∞..."})})}):e.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 pt-8 pb-8",children:[u!=="results"&&e.jsx("div",{className:"mb-8",children:e.jsxs(D,{size:"2xl",className:"mb-2",children:[u==="select_profile"&&"–î–ª—è –∫–æ–≥–æ –≤—ã–±–∏—Ä–∞–µ–º —Ü–µ–ª–∏?",u==="select_goals"&&"–ß—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–ª—É—á—à–∏—Ç—å?",u==="questionnaire"&&"–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –ø–æ–¥—Ä–æ–±–Ω–µ–µ"]})}),u==="select_profile"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx(S,{className:"glass-elegant p-6",style:{background:"rgba(255, 255, 255, 0.25)"},children:e.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:t==null?void 0:t.map(s=>{const l=h(s.id),n=r===s.id;return e.jsxs("div",{className:E("flex items-center gap-3 p-4 rounded-xl cursor-pointer transition-all bg-white",n?"bg-coral-light/5":"hover:bg-coral-light/5"),style:n?{boxShadow:"0 0 0 2px rgba(255, 182, 153, 0.6), 0 0 0 4px rgba(255, 182, 153, 0.3), 0 0 30px rgba(255, 182, 153, 0.4)"}:void 0,onClick:()=>{g(s.id),l&&(i(l.goals||[]),C(l.answers||{}),A(l.recommendations||null),m("results"))},children:[e.jsx(K,{className:"h-12 w-12",children:e.jsx(V,{className:"bg-muted",children:s.first_name[0]})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"font-medium truncate",children:[s.first_name," ",s.last_name||""]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.type==="parent"?"–†–æ–¥–∏—Ç–µ–ª—å":"–†–µ–±—ë–Ω–æ–∫"}),l&&l.goals&&l.goals.length>0&&e.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:l.goals.map(v=>{const k=G(v);return k?e.jsxs(Q,{className:"text-xs text-coral-light border-0",style:{background:"rgba(255, 182, 153, 0.2)",backgroundImage:"none"},children:[k.icon," ",k.title]},v):null})})]})]},s.id)})})}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(w,{onClick:()=>m("select_goals"),disabled:!z,children:["–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å",e.jsx(N,{name:"chevron-right",style:"rr",className:"h-4 w-4 ml-1"})]})})]}),u==="select_goals"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs(S,{className:"glass-elegant p-6",style:{background:"rgba(255, 255, 255, 0.25)"},children:[e.jsxs("h3",{className:"font-medium mb-4",children:["–í—ã–±–µ—Ä–∏—Ç–µ —Ü–µ–ª–∏ ",e.jsx("span",{className:"text-muted-foreground font-normal",children:"(–º–æ–∂–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ)"})]}),e.jsx("div",{className:"space-y-3",children:B.map(s=>{const l=a.includes(s.id);return e.jsxs("div",{className:E("flex items-start gap-4 p-4 rounded-xl cursor-pointer transition-all bg-white",l?"bg-coral-light/5":"hover:bg-coral-light/5"),style:l?{boxShadow:"0 0 0 2px rgba(255, 182, 153, 0.6), 0 0 0 4px rgba(255, 182, 153, 0.3), 0 0 30px rgba(255, 182, 153, 0.4)"}:void 0,onClick:()=>T(s.id),children:[e.jsx("div",{className:"text-2xl flex-shrink-0",children:s.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium",children:s.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description})]})]},s.id)})})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(w,{variant:"ghost",onClick:()=>m("select_profile"),children:[e.jsx(N,{name:"chevron-left",style:"rr",className:"h-4 w-4 mr-1"}),"–ù–∞–∑–∞–¥"]}),e.jsxs(w,{onClick:()=>{p(0),_(0),C({}),m("questionnaire")},disabled:!z,children:["–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å",e.jsx(N,{name:"chevron-right",style:"rr",className:"h-4 w-4 ml-1"})]})]})]}),u==="questionnaire"&&c&&b&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"flex-1 h-2.5 bg-white rounded-full overflow-hidden border border-border/50",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-coral to-coral-light transition-all duration-300 rounded-full",style:{width:`${F.percentage}%`}})}),e.jsxs("span",{className:"text-sm font-medium text-foreground",children:[F.current+1,"/",F.total]})]}),e.jsxs(S,{className:"glass-elegant p-6",style:{background:"rgba(255, 255, 255, 0.25)"},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("span",{className:"text-xl",children:c.icon}),e.jsx("span",{className:"text-sm text-muted-foreground",children:c.title})]}),e.jsx("h3",{className:"font-medium text-lg mb-6",children:b.text}),b.type==="single"&&e.jsx("div",{className:"space-y-2",children:b.options.map(s=>{const l=I()===s.value;return e.jsx("div",{className:E("flex items-center gap-3 p-4 rounded-xl cursor-pointer transition-all bg-white",l?"bg-coral-light/5":"hover:bg-coral-light/5"),style:l?{boxShadow:"0 0 0 2px rgba(255, 182, 153, 0.6), 0 0 0 4px rgba(255, 182, 153, 0.3), 0 0 30px rgba(255, 182, 153, 0.4)"}:void 0,onClick:()=>O(s.value),children:e.jsx("span",{children:s.label})},s.id)})}),b.type==="multiple"&&e.jsx("div",{className:"space-y-2",children:b.options.map(s=>{const l=I()||[],n=l.includes(s.value);return e.jsx("div",{className:E("flex items-center gap-3 p-4 rounded-xl cursor-pointer transition-all bg-white",n?"bg-coral-light/5":"hover:bg-coral-light/5"),style:n?{boxShadow:"0 0 0 2px rgba(255, 182, 153, 0.6), 0 0 0 4px rgba(255, 182, 153, 0.3), 0 0 30px rgba(255, 182, 153, 0.4)"}:void 0,onClick:()=>{O(n?l.filter(v=>v!==s.value):[...l,s.value])},children:e.jsx("span",{children:s.label})},s.id)})})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(w,{variant:"ghost",onClick:()=>{x===0&&o===0?m("select_goals"):W()},children:[e.jsx(N,{name:"chevron-left",style:"rr",className:"h-4 w-4 mr-1"}),"–ù–∞–∑–∞–¥"]}),e.jsxs(w,{onClick:H,disabled:!z,children:[o===a.length-1&&x===((c==null?void 0:c.questions.length)||1)-1?"–ó–∞–≤–µ—Ä—à–∏—Ç—å":"–î–∞–ª–µ–µ",e.jsx(Y,{className:"h-4 w-4 ml-1"})]})]})]}),u==="results"&&f&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-6 text-center",children:[e.jsxs(D,{size:"xl",className:"mb-2",children:["–¶–µ–ª–∏ –¥–ª—è ",M?ee(M.first_name,M.gender):""," –≥–æ—Ç–æ–≤—ã!"]}),e.jsx("p",{className:"text-muted-foreground",children:"–ù–∞ –æ—Å–Ω–æ–≤–µ –≤–∞—à–∏—Ö –æ—Ç–≤–µ—Ç–æ–≤ –º—ã –ø–æ–¥–≥–æ—Ç–æ–≤–∏–ª–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏"})]}),e.jsxs(S,{className:"bg-white p-6 border-0",children:[e.jsx("h3",{className:"font-medium mb-4",children:"–í—ã–±—Ä–∞–Ω–Ω—ã–µ —Ü–µ–ª–∏"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.map(s=>{const l=G(s);return l?e.jsxs(Q,{variant:"secondary",children:[l.icon," ",l.title]},s):null})})]}),e.jsxs(S,{className:"bg-white p-4 sm:p-6 border-0",children:[e.jsx("h3",{className:"font-medium mb-4 sm:mb-6 text-[#1a1a1a]",children:"–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–ª–∞–Ω"}),e.jsxs("div",{className:"grid gap-3 sm:gap-4 grid-cols-1 sm:grid-cols-3",children:[e.jsx("div",{className:"relative overflow-hidden rounded-[20px] bg-gradient-to-br from-[#ffecd2] via-[#ffd7ba] to-[#fcb69f] p-4 sm:p-6 shadow-[0_4px_20px_rgba(0,0,0,0.06)] transition-all duration-300 hover:shadow-[0_6px_30px_rgba(0,0,0,0.1)] hover:scale-[1.02]",children:e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-white/30 backdrop-blur-sm flex items-center justify-center mb-3 sm:mb-4",style:{lineHeight:0},children:e.jsx(N,{name:"calendar",style:"rr",className:"h-5 w-5 sm:h-6 sm:w-6 text-[#1a1a1a]"})}),e.jsx("p",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-[#1a1a1a] mb-1",children:f.sessionsPerWeek}),e.jsx("p",{className:"text-xs sm:text-sm text-[#1a1a1a]/80 font-medium",children:"—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ –≤ –Ω–µ–¥–µ–ª—é"})]})}),e.jsx("div",{className:"relative overflow-hidden rounded-[20px] bg-gradient-to-br from-[#FFE5F0] via-[#FFD4E8] to-[#FFC0E0] p-4 sm:p-6 shadow-[0_4px_20px_rgba(0,0,0,0.06)] transition-all duration-300 hover:shadow-[0_6px_30px_rgba(0,0,0,0.1)] hover:scale-[1.02]",children:e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-white/40 backdrop-blur-sm flex items-center justify-center mb-3 sm:mb-4",style:{lineHeight:0},children:e.jsx(N,{name:"clock",style:"rr",className:"h-5 w-5 sm:h-6 sm:w-6 text-[#1a1a1a]"})}),e.jsx("p",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-[#1a1a1a] mb-1",children:f.sessionDuration}),e.jsx("p",{className:"text-xs sm:text-sm text-[#1a1a1a]/80 font-medium",children:"–º–∏–Ω—É—Ç –∑–∞ —Å–µ—Å—Å–∏—é"})]})}),e.jsx("div",{className:"relative overflow-hidden rounded-[20px] bg-gradient-to-br from-[#e6dff5] via-[#d4c5f0] to-[#c8b8e8] p-4 sm:p-6 shadow-[0_4px_20px_rgba(0,0,0,0.06)] transition-all duration-300 hover:shadow-[0_6px_30px_rgba(0,0,0,0.1)] hover:scale-[1.02]",children:e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-white/50 backdrop-blur-sm flex items-center justify-center mb-3 sm:mb-4",style:{lineHeight:0},children:e.jsx(N,{name:"target",style:"rr",className:"h-5 w-5 sm:h-6 sm:w-6 text-[#1a1a1a]"})}),e.jsxs("p",{className:"text-lg sm:text-xl md:text-2xl font-bold text-[#1a1a1a] mb-1 capitalize break-words",children:[f.intensity==="light"&&"–õ—ë–≥–∫–∞—è",f.intensity==="moderate"&&"–£–º–µ—Ä–µ–Ω–Ω–∞—è",f.intensity==="intensive"&&"–ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–∞—è"]}),e.jsx("p",{className:"text-xs sm:text-sm text-[#1a1a1a]/80 font-medium",children:"–∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å"})]})})]})]}),f.tips.length>0&&e.jsxs(S,{className:"bg-white p-6 border-0",children:[e.jsx("h3",{className:"font-medium mb-4",children:"–°–æ–≤–µ—Ç—ã –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫"}),e.jsx("ul",{className:"space-y-2",children:f.tips.map((s,l)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm text-muted-foreground",children:[e.jsx("span",{className:"text-coral",children:"‚Ä¢"}),s]},l))})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx(w,{variant:"outline",onClick:()=>{m("select_goals"),C({}),A(null)},children:"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å"}),L.length>0&&e.jsx(w,{variant:"outline",onClick:()=>{m("select_profile"),g(null),i([]),C({}),A(null),p(0),_(0)},children:"–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –¥–ª—è –¥—Ä—É–≥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"}),e.jsx(w,{onClick:J,className:"flex-1",children:"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"})]})]})]})}export{ue as default};
