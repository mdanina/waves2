import{r as _,j as e}from"./vendor-radix-J7BmBqsC.js";import{g as U,S as l,C as o,B as d,L as p,r as y,a2 as I,t as q,i as m,U as x,f as k,b8 as W,b9 as M,ba as V,bb as $}from"./index-CsvxaYtI.js";import{u as R,a as H}from"./useDevice-1x5MqRfq.js";import{u as Q}from"./vendor-react-CI1J5nwZ.js";import{P as B}from"./package-DiQpez8U.js";import{E as A}from"./external-link-Cy2wAi2R.js";import{M as K}from"./map-pin-sRA3SeWw.js";import"./vendor-charts-CkgrveCd.js";import"./vendor-query-Bb981xLV.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=U("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]),J=[{id:"unpack",title:"Распаковать нейроустройство",description:"Проверьте комплектацию и целостность"},{id:"charge",title:"Зарядить нейроустройство и мобильное устройство",description:"Полностью зарядите перед первым использованием"},{id:"download_app",title:"Скачать приложение Waves",description:"Установите приложение на телефон",link:"https://waves.ai/app",linkText:"Скачать"},{id:"pair_device",title:"Подключить нейроустройство к приложению",description:"Следуйте инструкциям в приложении"},{id:"test_signal",title:"Проверить качество сигнала",description:"Убедитесь, что устройство корректно считывает данные"},{id:"complete_tutorial",title:"Пройти обучение в приложении",description:"Завершите вводный инструктаж"}],X=[{id:"what_included",category:"setup",question:"Что входит в комплект?",answer:"В комплект входит: устройство нейрофидбэка, зарядный кабель USB-C, краткая инструкция по началу работы, чехол для хранения."},{id:"how_charge",category:"setup",question:"Как заряжать устройство?",answer:"Подключите устройство к зарядному устройству через USB-C кабель. Полная зарядка занимает около 2 часов. Индикатор загорится зеленым, когда устройство полностью заряжено."},{id:"how_connect",category:"setup",question:"Как подключить устройство к телефону?",answer:'Откройте приложение Waves, перейдите в раздел "Устройство", нажмите "Подключить". Убедитесь, что Bluetooth включен. Следуйте инструкциям на экране.'},{id:"no_signal",category:"troubleshooting",question:"Устройство не ловит сигнал",answer:"Убедитесь, что электроды плотно прилегают к коже. Протрите контактные площадки влажной салфеткой. Проверьте заряд устройства. Если проблема сохраняется, обратитесь в поддержку."},{id:"not_connecting",category:"troubleshooting",question:"Устройство не подключается к телефону",answer:"Перезагрузите устройство и телефон. Убедитесь, что Bluetooth включен. Удалите устройство из списка сопряженных и подключите заново. Обновите приложение до последней версии."},{id:"battery_drain",category:"troubleshooting",question:"Батарея быстро разряжается",answer:"Это может быть связано с активным Bluetooth-соединением. Выключайте устройство после тренировки. Если батарея разряжается менее чем за 4 часа активного использования, обратитесь в поддержку."},{id:"how_clean",category:"care",question:"Как ухаживать за устройством?",answer:"Протирайте электроды влажной салфеткой после каждого использования. Храните в чехле в сухом месте. Не погружайте в воду. Избегайте падений и ударов."},{id:"session_duration",category:"usage",question:"Как часто проводить тренировки?",answer:"Рекомендуемая частота — 3-5 тренировок в неделю по 20-30 минут. Не проводите более одной тренировки в день. Следуйте рекомендациям вашего специалиста."}],Y={not_ordered:"Не заказано",ordered:"Заказ оформлен",shipped:"Отправлено",in_transit:"В пути",delivered:"Доставлено",setup_pending:"Ожидает настройки",setup_complete:"Готово к работе"},Z={not_ordered:"bg-muted text-muted-foreground",ordered:"bg-honey/20 text-honey-dark",shipped:"bg-sky-100 text-sky-700",in_transit:"bg-sky-100 text-sky-700",delivered:"bg-success/20 text-success",setup_pending:"bg-coral/20 text-coral",setup_complete:"bg-success/20 text-success"};function me(){const i=Q(),{device:s,loading:g,orderDevice:c,updateStatus:b,hasDevice:n,isDelivered:f,isSetupComplete:S}=R(),[L,se]=_.useState(()=>sessionStorage.getItem("license_purchased")==="true"),{toggleStep:F,isStepComplete:T,progress:N,isAllComplete:O}=H(),[z,D]=_.useState(!1),[E,w]=_.useState(!1),[t,h]=_.useState({full_name:"",phone:"",city:"",address:"",postal_code:"",comment:""}),P=async r=>{if(r.preventDefault(),!t.full_name||!t.phone||!t.city||!t.address){k.error("Заполните все обязательные поля");return}D(!0);try{await c({full_name:t.full_name,phone:t.phone,city:t.city,address:t.address,postal_code:t.postal_code,comment:t.comment||void 0}),k.success("Заказ оформлен! Мы свяжемся с вами для подтверждения."),w(!1)}catch{k.error("Ошибка при оформлении заказа")}finally{D(!1)}};return g?e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-muted-foreground",children:"Загрузка..."})})}):e.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 pt-8 pb-8",children:[e.jsx("div",{className:"mb-8",children:e.jsx(l,{size:"2xl",className:"mb-2",children:"Мое нейроустройство"})}),!n&&!E&&e.jsx(o,{className:"bg-white shadow-[0_4px_20px_rgba(0,0,0,0.06)] border-0 p-6 sm:p-8",children:e.jsx("div",{className:"text-center max-w-md mx-auto",children:L?e.jsxs(e.Fragment,{children:[e.jsx(l,{size:"xl",className:"mb-3",children:"Дооформите доставку нейроустройства"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Вы приобрели лицензию с нейроустройством. Теперь нужно указать адрес доставки, чтобы мы могли отправить вам его."}),e.jsxs(d,{size:"lg",onClick:()=>w(!0),className:"bg-gradient-to-r from-coral to-coral-light hover:opacity-90",children:[e.jsx(B,{className:"h-5 w-5 mr-2"}),"Указать адрес доставки"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(l,{size:"xl",className:"mb-3",children:"У вас ещё нет устройства"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Устройство нейрофидбэка входит в состав лицензии. Оформите заказ, и мы доставим его вам."}),e.jsxs(d,{size:"lg",onClick:()=>i("/cabinet/licenses"),className:"bg-gradient-to-r from-coral to-coral-light hover:opacity-90",children:[e.jsx(B,{className:"h-5 w-5 mr-2"}),"Купить лицензию с устройством"]})]})})}),!n&&E&&e.jsxs(o,{className:"glass-elegant border-2 p-6 sm:p-8",children:[e.jsx("div",{className:"mb-6",children:e.jsx(l,{size:"lg",children:"Оформление заказа"})}),e.jsxs("form",{onSubmit:P,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"full_name",children:"ФИО получателя *"}),e.jsx(y,{id:"full_name",value:t.full_name,onChange:r=>h(a=>({...a,full_name:r.target.value})),placeholder:"Иванов Иван Иванович",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"phone",children:"Телефон *"}),e.jsx(y,{id:"phone",type:"tel",value:t.phone,onChange:r=>h(a=>({...a,phone:r.target.value})),placeholder:"+7 (999) 123-45-67",required:!0})]})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"city",children:"Город *"}),e.jsx(y,{id:"city",value:t.city,onChange:r=>h(a=>({...a,city:r.target.value})),placeholder:"Москва",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"postal_code",children:"Индекс"}),e.jsx(y,{id:"postal_code",value:t.postal_code,onChange:r=>h(a=>({...a,postal_code:r.target.value})),placeholder:"123456"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"address",children:"Адрес доставки *"}),e.jsx(I,{id:"address",value:t.address,onChange:r=>h(a=>({...a,address:r.target.value})),placeholder:"Улица, дом, квартира",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"comment",children:"Комментарий к заказу"}),e.jsx(I,{id:"comment",value:t.comment,onChange:r=>h(a=>({...a,comment:r.target.value})),placeholder:"Домофон, подъезд, время доставки..."})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4",children:[e.jsx(d,{type:"submit",disabled:z,className:"flex-1",children:z?"Оформление...":"Оформить заказ"}),e.jsx(d,{type:"button",variant:"outline",onClick:()=>w(!1),children:"Отмена"})]})]})]}),n&&s&&!f&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(o,{className:"bg-white shadow-[0_4px_20px_rgba(0,0,0,0.06)] p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx(l,{size:"lg",children:"Статус заказа"}),e.jsx(q,{className:m(s.status==="ordered"||s.status==="shipped"||s.status==="in_transit"?"border-0 !from-transparent !to-transparent text-[#1a1a1a]":Z[s.status]),style:s.status==="ordered"||s.status==="shipped"||s.status==="in_transit"?{background:"transparent",backgroundImage:"none",border:"none",color:"#1a1a1a"}:void 0,children:Y[s.status]})]}),e.jsx(ee,{device:s}),s.tracking_number&&e.jsxs("div",{className:"mt-6 p-4 bg-muted/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(x,{name:"truck",style:"rr",className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:"Отслеживание"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Номер отслеживания: ",e.jsx("span",{className:"font-mono",children:s.tracking_number})]}),s.carrier==="sdek"&&e.jsxs(d,{variant:"link",size:"sm",className:"px-0 h-auto mt-1 text-coral hover:text-coral",onClick:()=>window.open(`https://www.cdek.ru/track.html?order_id=${s.tracking_number}`,"_blank"),children:["Отследить на сайте СДЭК",e.jsx(A,{className:"h-3 w-3 ml-1"})]})]}),s.shipping_address&&e.jsxs("div",{className:"mt-4 p-4 bg-muted/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(K,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:"Адрес доставки"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.shipping_address.full_name,e.jsx("br",{}),s.shipping_address.city,", ",s.shipping_address.address,s.shipping_address.postal_code&&`, ${s.shipping_address.postal_code}`]})]})]}),e.jsx(C,{}),!1]}),n&&s&&f&&!S&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(o,{className:"bg-white shadow-[0_4px_20px_rgba(0,0,0,0.06)] p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center flex-shrink-0 shadow-sm",style:{background:"linear-gradient(108deg, rgba(34, 197, 94, 0.25) 0%, rgba(34, 197, 94, 0.14) 100%)",backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)"},children:e.jsx(x,{name:"check-circle-2",style:"rr",className:"h-4 w-4 text-green-600"})}),e.jsxs("div",{children:[e.jsx(l,{size:"lg",children:"Нейроустройство доставлено!"}),e.jsx("p",{className:"text-muted-foreground",children:"Теперь настройте его, следуя чек-листу ниже"})]})]})}),e.jsxs(o,{className:"bg-white shadow-[0_4px_20px_rgba(0,0,0,0.06)] p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx(l,{size:"lg",children:"Настройка устройства"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-24 h-2 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-coral to-coral-light transition-all duration-500",style:{width:`${N.percentage}%`}})}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[N.completed,"/",N.total]})]})]}),e.jsx("div",{className:"space-y-2",children:J.map((r,a)=>{const u=T(r.id),v=!u&&a===N.completed;return e.jsxs("div",{className:m("flex items-start gap-3 p-3 rounded-xl transition-all duration-200",v&&!u&&"bg-white/50",u&&"opacity-60","cursor-pointer hover:bg-white/50"),onClick:()=>F(r.id),role:"button",tabIndex:0,onKeyDown:j=>{(j.key==="Enter"||j.key===" ")&&(j.preventDefault(),F(r.id))},children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:u?e.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center shadow-sm",style:{background:"linear-gradient(108deg, rgba(34, 197, 94, 0.25) 0%, rgba(34, 197, 94, 0.14) 100%)",backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",border:"1px solid rgba(34, 197, 94, 0.3)"},children:e.jsx(x,{name:"check-circle-2",style:"rr",className:"h-4 w-4 text-green-600"})}):e.jsx("div",{className:m("w-6 h-6 rounded-full border flex items-center justify-center transition-colors",v&&"border-coral"),style:{background:v?"linear-gradient(108deg, rgba(255, 138, 91, 0.25) 0%, rgba(255, 138, 91, 0.14) 100%)":"linear-gradient(108deg, rgba(255, 255, 255, 0.25) 0%, rgba(255, 255, 255, 0.14) 100%)",backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",border:v?"1px solid rgba(255, 138, 91, 0.3)":"1px solid rgba(0, 0, 0, 0.1)"},children:e.jsx("span",{className:"text-xs font-medium text-foreground",children:a+1})})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("p",{className:m("transition-all",u&&"line-through text-muted-foreground"),children:r.title})}),r.link&&!u&&e.jsxs(d,{variant:"ghost",size:"sm",className:"h-7 px-2 text-coral hover:text-coral hover:bg-coral/10 flex-shrink-0",onClick:j=>{j.stopPropagation(),window.open(r.link,"_blank")},children:[e.jsx("span",{className:"text-xs mr-1",children:r.linkText||"Открыть"}),e.jsx(A,{className:"h-3 w-3"})]})]})})]},r.id)})}),O&&e.jsx("div",{className:"mt-6 pt-6 border-t border-border/50 text-center",children:e.jsx(d,{onClick:()=>b("setup_complete"),size:"lg",children:"Завершить настройку"})})]}),e.jsx(C,{}),!1]}),n&&s&&S&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(o,{className:"bg-white shadow-[0_4px_20px_rgba(0,0,0,0.06)] p-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-coral/20 to-coral/10 flex items-center justify-center",children:e.jsx(G,{className:"h-8 w-8 text-coral"})}),e.jsxs("div",{children:[e.jsx(l,{size:"lg",children:s.model==="Waves Neurofeedback v1"?"Flex 4":s.model}),e.jsxs(q,{className:"mt-1 text-xs text-green-600 border-0",style:{background:"rgba(34, 197, 94, 0.2)",backgroundImage:"none"},children:[e.jsx(x,{name:"check-circle-2",style:"rr",className:"h-3 w-3 mr-1"}),"Готово к работе"]})]})]}),e.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Дата получения"}),e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[s.delivered_at?e.jsx("p",{className:"text-sm",children:new Date(s.delivered_at).toLocaleDateString("ru-RU")}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"—"}),s.serial_number?e.jsx("p",{className:"font-mono text-sm text-foreground",children:s.serial_number}):e.jsx("p",{className:"font-mono text-sm text-muted-foreground",children:"—"})]})]})]}),e.jsx(C,{}),!1]})]})}function ee({device:i}){const s=[{id:"ordered",label:"Заказ оформлен",iconName:"box"},{id:"shipped",label:"Отправлено",iconName:"envelope"},{id:"in_transit",label:"В пути",iconName:"truck"},{id:"delivered",label:"Доставлено",iconName:"check-circle-2"}],g=s.findIndex(c=>c.id===i.status);return e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute top-5 left-0 right-0 h-0.5 bg-[#1a1a1a]/10",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-coral to-coral-light transition-all duration-500",style:{width:`${g/(s.length-1)*100}%`}})}),e.jsx("div",{className:"relative flex justify-between",children:s.map((c,b)=>{const n=b<=g,f=b===g;return e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:m("w-10 h-10 rounded-full flex items-center justify-center transition-all",n?"border-2 border-coral bg-white":"border-2 border-[#1a1a1a]/20 bg-white"),children:e.jsx(x,{name:c.iconName,style:"rr",className:m("h-5 w-5",n?"text-coral":"text-muted-foreground/50")})}),e.jsx("span",{className:m("text-xs mt-2 text-center max-w-[80px]",f?"font-medium text-foreground":"text-muted-foreground"),children:c.label})]},c.id)})})]})}function C(){return e.jsxs(o,{className:"glass-elegant border-2 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(x,{name:"help-circle",style:"rr",className:"h-5 w-5 text-muted-foreground"}),e.jsx(l,{size:"lg",children:"Частые вопросы"})]}),e.jsx(W,{type:"single",collapsible:!0,className:"space-y-2",children:X.map(i=>e.jsxs(M,{value:i.id,className:"border border-border/50 rounded-lg px-4",children:[e.jsx(V,{className:"text-left hover:no-underline py-4",children:e.jsx("span",{className:"text-sm font-medium",children:i.question})}),e.jsx($,{className:"text-sm text-muted-foreground pb-4",children:i.answer})]},i.id))}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-border/50 text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Не нашли ответ на свой вопрос?"}),e.jsxs(d,{variant:"outline",onClick:()=>window.open("https://t.me/waves_support_bot","_blank"),children:[e.jsx(x,{name:"help-circle",style:"rr",className:"h-4 w-4 mr-2"}),"Написать в поддержку"]})]})]})}export{me as default};
