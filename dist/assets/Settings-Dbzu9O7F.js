import{j as e,r as i}from"./vendor-radix-CDHcN1cP.js";import{u as Ne,c as ve}from"./vendor-react-D0zZO7ze.js";import{h as we,C as d,$ as m,a0 as h,ak as x,i as j,A as P,s as F,t as I,ac as oe,L as S,Z as b,T as de,u as me,R,B as v,a6 as ke,Y as ye,ba as Se,_ as be,aF as ee,x as M,a as se,b as ae,c as te,d as ie,e as re,ad as Ce}from"./index-Dt6uKTGi.js";import{S as W}from"./switch-DdimT5yl.js";import{S as Te}from"./separator-jFFEuoi3.js";import{T as Ee,a as _e,b as z,c as O}from"./tabs-DSf7QTkF.js";import{getCurrentUserData as Le,updateUserData as $}from"./userStorage-BC6791f4.js";import{g as Pe,T as Fe}from"./moscowTime-Bf471xDt.js";import{u as Ie}from"./usePushNotifications-Djlcy60w.js";import{S as Ue}from"./smartphone-Vnh406Yu.js";import{B as Q}from"./bell-off-Cju6uPn9.js";import{M as ne}from"./message-circle-CMZsbXbe.js";import{L as Ae}from"./link-2--rJs-hQB.js";import{E as Re}from"./external-link-DbqO2EaT.js";import{S as le}from"./shield-A9xDYWCw.js";import{M as ce}from"./map-pin-BeMnFJOI.js";import{S as B}from"./save-BUnVifpG.js";import{P as De}from"./phone-BsXMmGev.js";import"./vendor-charts-DMFz3Lzq.js";import"./vendor-query-DyYoeD25.js";import"./push-notifications-C-gnuEtV.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=we("Link2Off",[["path",{d:"M9 17H7A5 5 0 0 1 7 7",key:"10o201"}],["path",{d:"M15 7h2a5 5 0 0 1 4 8",key:"1d3206"}],["line",{x1:"8",x2:"12",y1:"12",y2:"12",key:"rvw6j4"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);function ze(){const{status:s,isSubscribed:l,isLoading:n,error:c,isIOSDevice:p,isPWAInstalled:_,subscribe:u,unsubscribe:C}=Ie(),o=async()=>{l?await C():await u()};return s==="ios-not-installed"?e.jsxs(d,{children:[e.jsxs(m,{children:[e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"h-5 w-5"}),"Push-уведомления"]}),e.jsx(x,{children:"Получайте уведомления о новых сообщениях и записях"})]}),e.jsx(j,{children:e.jsxs(P,{children:[e.jsx(F,{className:"h-4 w-4"}),e.jsxs(I,{children:[e.jsx("p",{className:"font-medium mb-2",children:"Установите приложение на iPhone"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Чтобы получать push-уведомления на iOS, сначала добавьте Waves на главный экран:"}),e.jsxs("ol",{className:"text-sm text-muted-foreground list-decimal list-inside space-y-1",children:[e.jsx("li",{children:"Нажмите кнопку «Поделиться» внизу Safari"}),e.jsx("li",{children:"Выберите «На экран Домой»"}),e.jsx("li",{children:"Нажмите «Добавить»"}),e.jsx("li",{children:"Откройте приложение с главного экрана"})]})]})]})})]}):s==="unsupported"?e.jsxs(d,{children:[e.jsxs(m,{children:[e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"h-5 w-5"}),"Push-уведомления"]}),e.jsx(x,{children:"Получайте уведомления о новых сообщениях и записях"})]}),e.jsx(j,{children:e.jsxs(P,{variant:"destructive",children:[e.jsx(F,{className:"h-4 w-4"}),e.jsxs(I,{children:["Ваш браузер не поддерживает push-уведомления.",p&&e.jsx("span",{className:"block mt-1",children:"Для iOS требуется версия 16.4 или новее."})]})]})})]}):s==="permission-denied"?e.jsxs(d,{children:[e.jsxs(m,{children:[e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"h-5 w-5"}),"Push-уведомления"]}),e.jsx(x,{children:"Получайте уведомления о новых сообщениях и записях"})]}),e.jsx(j,{children:e.jsxs(P,{children:[e.jsx(F,{className:"h-4 w-4"}),e.jsxs(I,{children:[e.jsx("p",{className:"font-medium mb-2",children:"Уведомления заблокированы"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Вы ранее отклонили разрешение на уведомления. Чтобы включить их, измените настройки в браузере или в настройках сайта."})]})]})})]}):e.jsxs(d,{children:[e.jsxs(m,{children:[e.jsxs(h,{className:"flex items-center gap-2",children:[l?e.jsx(oe,{className:"h-5 w-5 text-success"}):e.jsx(Q,{className:"h-5 w-5"}),"Push-уведомления"]}),e.jsx(x,{children:"Получайте уведомления о новых сообщениях и записях"})]}),e.jsxs(j,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(S,{htmlFor:"push-toggle",className:"text-base",children:"Включить уведомления"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:l?"Вы будете получать уведомления на это устройство":"Разрешите уведомления, чтобы не пропустить важные сообщения"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[n&&e.jsx(b,{className:"h-4 w-4 animate-spin"}),e.jsx(W,{id:"push-toggle",checked:l,onCheckedChange:o,disabled:n})]})]}),l&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-success",children:[e.jsx(de,{className:"h-4 w-4"}),"Уведомления включены"]}),c&&e.jsxs(P,{variant:"destructive",children:[e.jsx(F,{className:"h-4 w-4"}),e.jsx(I,{children:c})]}),p&&_&&!l&&e.jsx("p",{className:"text-xs text-muted-foreground",children:"Вы используете Waves как приложение. Включите уведомления, чтобы получать оповещения."})]})]})}function Oe(){const{user:s}=me(),[l,n]=i.useState({isLinked:!1,isActive:!1,telegramUsername:null,telegramFirstName:null,linkedAt:null}),[c,p]=i.useState(null),[_,u]=i.useState(!1),[C,o]=i.useState(null),w=i.useCallback(async()=>{if(s!=null&&s.id)try{const{data:t,error:r}=await R.rpc("get_telegram_link_status",{p_user_id:s.id});if(r)throw r;t&&n({isLinked:t.is_linked||!1,isActive:t.is_active||!1,telegramUsername:t.telegram_username||null,telegramFirstName:t.telegram_first_name||null,linkedAt:t.linked_at||null})}catch(t){console.error("Error loading Telegram link status:",t)}},[s==null?void 0:s.id]);i.useEffect(()=>{w()},[w]);const k=i.useCallback(async()=>{if(!(s!=null&&s.id))return o("Необходимо авторизоваться"),null;u(!0),o(null);try{const{data:t,error:r}=await R.rpc("generate_telegram_link_token",{p_user_id:s.id});if(r)throw r;if(t&&t.length>0){const N=t[0],E={token:N.token,expiresAt:new Date(N.expires_at),botUsername:N.bot_username||"waves_notification_bot"};return p(E),E}throw new Error("Не удалось создать токен")}catch(t){return console.error("Error generating Telegram link token:",t),o(t.message||"Ошибка при создании токена"),null}finally{u(!1)}},[s==null?void 0:s.id]),L=i.useCallback(async()=>{if(!(s!=null&&s.id))return o("Необходимо авторизоваться"),!1;u(!0),o(null);try{const{data:t,error:r}=await R.rpc("unlink_telegram_account",{p_user_id:s.id});if(r)throw r;return n({isLinked:!1,isActive:!1,telegramUsername:null,telegramFirstName:null,linkedAt:null}),p(null),!0}catch(t){return console.error("Error unlinking Telegram:",t),o(t.message||"Ошибка при отключении Telegram"),!1}finally{u(!1)}},[s==null?void 0:s.id]),y=i.useCallback(async t=>{if(!(s!=null&&s.id))return!1;u(!0),o(null);try{const{error:r}=await R.from("user_telegram_links").update({is_active:t,updated_at:new Date().toISOString()}).eq("user_id",s.id);if(r)throw r;return n(N=>({...N,isActive:t})),!0}catch(r){return console.error("Error toggling Telegram notifications:",r),o(r.message||"Ошибка при изменении настроек"),!1}finally{u(!1)}},[s==null?void 0:s.id]),f=i.useCallback((t,r)=>`https://t.me/${r}?start=${t}`,[]),T=i.useCallback((t,r=256)=>`https://api.qrserver.com/v1/create-qr-code/?size=${r}x${r}&data=${encodeURIComponent(t)}&format=svg`,[]);return{status:l,linkToken:c,isLoading:_,error:C,generateToken:k,unlink:L,toggleNotifications:y,getDeepLink:f,getQRCodeUrl:T,refreshStatus:w}}function $e(){const{status:s,linkToken:l,isLoading:n,error:c,generateToken:p,unlink:_,toggleNotifications:u,getDeepLink:C,getQRCodeUrl:o,refreshStatus:w}=Oe(),[k,L]=i.useState(0),[y,f]=i.useState(!1);i.useEffect(()=>{if(!l){L(0);return}const g=()=>{const A=new Date,D=Math.max(0,Math.floor((l.expiresAt.getTime()-A.getTime())/1e3));L(D),D<=0&&f(!1)};g();const U=setInterval(g,1e3);return()=>clearInterval(U)},[l]);const T=g=>{const U=Math.floor(g/60),A=g%60;return`${U.toString().padStart(2,"0")}:${A.toString().padStart(2,"0")}`},t=async()=>{await p()&&f(!0)},r=async()=>{await p()},N=async()=>{await _()&&f(!1)},E=async()=>{await u(!s.isActive)};return i.useEffect(()=>{if(!y||!l)return;const g=setInterval(async()=>{await w()},3e3);return()=>clearInterval(g)},[y,l,w]),i.useEffect(()=>{s.isLinked&&y&&f(!1)},[s.isLinked,y]),s.isLinked?e.jsxs(d,{children:[e.jsxs(m,{children:[e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"h-5 w-5 text-[#0088cc]"}),"Telegram"]}),e.jsx(x,{children:"Получайте уведомления о консультациях в Telegram"})]}),e.jsxs(j,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-success",children:[e.jsx(de,{className:"h-4 w-4"}),e.jsxs("span",{children:["Подключён",s.telegramUsername&&e.jsxs("span",{className:"text-muted-foreground ml-1",children:["@",s.telegramUsername]}),!s.telegramUsername&&s.telegramFirstName&&e.jsxs("span",{className:"text-muted-foreground ml-1",children:["(",s.telegramFirstName,")"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(S,{htmlFor:"tg-toggle",className:"text-base",children:"Уведомления включены"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.isActive?"Вы будете получать уведомления в Telegram":"Уведомления приостановлены"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[n&&e.jsx(b,{className:"h-4 w-4 animate-spin"}),e.jsx(W,{id:"tg-toggle",checked:s.isActive,onCheckedChange:E,disabled:n})]})]}),e.jsxs(v,{variant:"outline",size:"sm",onClick:N,disabled:n,className:"text-muted-foreground",children:[e.jsx(Me,{className:"h-4 w-4 mr-2"}),"Отключить Telegram"]}),c&&e.jsxs(P,{variant:"destructive",children:[e.jsx(F,{className:"h-4 w-4"}),e.jsx(I,{children:c})]})]})]}):e.jsxs(d,{children:[e.jsxs(m,{children:[e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"h-5 w-5"}),"Telegram"]}),e.jsx(x,{children:"Получайте уведомления о консультациях в Telegram"})]}),e.jsxs(j,{className:"space-y-4",children:[y?l?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("p",{className:"text-sm font-medium",children:["Отсканируйте QR-код или перейдите"," ",e.jsxs("a",{href:C(l.token,l.botUsername),target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline inline-flex items-center gap-1",children:["по ссылке",e.jsx(Re,{className:"h-3 w-3"})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:e.jsx("img",{src:o(C(l.token,l.botUsername),200),alt:"QR-код для подключения Telegram",width:200,height:200,className:"block"})})}),e.jsxs(P,{children:[e.jsx(F,{className:"h-4 w-4"}),e.jsx(I,{children:"Не передавайте ссылку и QR-код третьим лицам."})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Деактивируем ссылку и QR-код через"," ",e.jsx("span",{className:"font-mono font-medium text-foreground",children:T(k)})]}),k<60&&e.jsxs(v,{variant:"outline",size:"sm",onClick:r,disabled:n,children:[e.jsx(ke,{className:"h-4 w-4 mr-2"}),"Обновить код"]}),e.jsx(v,{variant:"ghost",size:"sm",onClick:()=>f(!1),className:"text-muted-foreground",children:"Отмена"})]})}):null:e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsx("p",{children:"Подключите Telegram, чтобы получать:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[e.jsx("li",{children:"Напоминания о консультациях"}),e.jsx("li",{children:"Ссылки на видеокомнаты"}),e.jsx("li",{children:"Уведомления о новых сообщениях"})]})]}),e.jsx(v,{onClick:t,disabled:n,children:n?e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"h-4 w-4 mr-2 animate-spin"}),"Подключение..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ae,{className:"h-4 w-4 mr-2"}),"Подключить Telegram"]})})]}),c&&e.jsxs(P,{variant:"destructive",children:[e.jsx(F,{className:"h-4 w-4"}),e.jsx(I,{children:c})]})]})]})}const Be=["Москва","Санкт-Петербург","Новосибирск","Екатеринбург","Казань","Нижний Новгород","Челябинск","Самара","Омск","Ростов-на-Дону","Уфа","Красноярск","Воронеж","Пермь","Волгоград"];function hs(){const s=Ne(),[l]=ve(),{toast:n}=ye(),{user:c,signOut:p}=me(),_=l.get("tab")||"profile",[u,C]=i.useState(_),[o,w]=i.useState(""),[k,L]=i.useState(""),[y,f]=i.useState(!0),[T,t]=i.useState(!1),[r,N]=i.useState(""),[E,g]=i.useState(""),[U,A]=i.useState(!1),[D,V]=i.useState(!0),[Qe,We]=i.useState(!1),[q,H]=i.useState(!1),[Z,G]=i.useState(""),[Y,J]=i.useState(""),[K,X]=i.useState(!1);i.useEffect(()=>{he()},[c]);const he=async()=>{if(c)try{f(!0);const a=await Le();a&&(w(c.email||""),L(a.phone||""),G(a.region||""),V(a.marketing_consent??!0));const fe=localStorage.getItem("user_timezone");J(fe||Pe())}catch(a){console.error("Error loading user data:",a)}finally{f(!1)}},xe=async()=>{if(!(!o||o===(c==null?void 0:c.email)))try{t(!0);const{error:a}=await R.auth.updateUser({email:o});if(a)throw a;await $({email:o}),n({title:"Подтвердите email",description:"На новый адрес отправлено письмо для подтверждения"})}catch(a){console.error("Error updating email:",a),n({title:"Ошибка",description:"Не удалось обновить email",variant:"destructive"})}finally{t(!1)}},je=async()=>{if(k)try{t(!0),await $({phone:k}),n({title:"Телефон сохранён",description:"Номер телефона успешно обновлён"})}catch(a){console.error("Error updating phone:",a),n({title:"Ошибка",description:"Не удалось обновить телефон",variant:"destructive"})}finally{t(!1)}},ue=async()=>{if(r!==E){n({title:"Ошибка",description:"Пароли не совпадают",variant:"destructive"});return}if(r.length<8){n({title:"Ошибка",description:"Пароль должен содержать минимум 8 символов",variant:"destructive"});return}try{A(!0);const{error:a}=await R.auth.updateUser({password:r});if(a)throw a;n({title:"Пароль изменён",description:"Ваш пароль успешно обновлён"}),N(""),g("")}catch(a){console.error("Error changing password:",a),n({title:"Ошибка",description:"Не удалось изменить пароль",variant:"destructive"})}finally{A(!1)}},ge=async()=>{try{H(!0),await $({marketing_consent:D}),n({title:"Настройки сохранены",description:"Настройки уведомлений обновлены"})}catch(a){console.error("Error saving notifications:",a),n({title:"Ошибка",description:"Не удалось сохранить настройки",variant:"destructive"})}finally{H(!1)}},pe=async()=>{try{X(!0),await $({region:Z}),localStorage.setItem("user_timezone",Y),n({title:"Настройки сохранены",description:"Регион и часовой пояс обновлены"})}catch(a){console.error("Error saving region:",a),n({title:"Ошибка",description:"Не удалось сохранить настройки",variant:"destructive"})}finally{X(!1)}};return e.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 pt-8 pb-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx(Se,{size:"2xl",className:"mb-2",children:"Настройки"}),e.jsx("p",{className:"text-muted-foreground",children:"Управление профилем и предпочтениями"})]}),y?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(b,{className:"h-8 w-8 animate-spin text-primary"})}):e.jsxs(Ee,{value:u,onValueChange:C,className:"space-y-6",children:[e.jsxs(_e,{className:"glass-elegant grid w-full grid-cols-4 lg:w-auto lg:inline-flex",children:[e.jsxs(z,{value:"profile",className:"flex items-center gap-2 data-[state=active]:bg-white/20 data-[state=active]:backdrop-blur-[8px]",children:[e.jsx(be,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Профиль"})]}),e.jsxs(z,{value:"notifications",className:"flex items-center gap-2 data-[state=active]:bg-white/20 data-[state=active]:backdrop-blur-[8px]",children:[e.jsx(oe,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Уведомления"})]}),e.jsxs(z,{value:"security",className:"flex items-center gap-2 data-[state=active]:bg-white/20 data-[state=active]:backdrop-blur-[8px]",children:[e.jsx(le,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Безопасность"})]}),e.jsxs(z,{value:"region",className:"flex items-center gap-2 data-[state=active]:bg-white/20 data-[state=active]:backdrop-blur-[8px]",children:[e.jsx(ce,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Регион"})]})]}),e.jsxs(O,{value:"profile",className:"space-y-4",children:[e.jsxs(d,{children:[e.jsxs(m,{children:[e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-5 w-5"}),"Email"]}),e.jsx(x,{children:"Адрес электронной почты для входа и уведомлений"})]}),e.jsxs(j,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"email",children:"Email"}),e.jsx(M,{id:"email",type:"email",value:o,onChange:a=>w(a.target.value),placeholder:"example@mail.com"})]}),e.jsx(v,{onClick:xe,disabled:T||o===(c==null?void 0:c.email),children:T?e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"mr-2 h-4 w-4 animate-spin"}),"Сохранение..."]}):e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"mr-2 h-4 w-4"}),"Изменить email"]})})]})]}),e.jsxs(d,{children:[e.jsxs(m,{children:[e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(De,{className:"h-5 w-5"}),"Телефон"]}),e.jsx(x,{children:"Номер телефона для связи"})]}),e.jsxs(j,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"phone",children:"Телефон"}),e.jsx(M,{id:"phone",type:"tel",value:k,onChange:a=>L(a.target.value),placeholder:"+7 (999) 123-45-67"})]}),e.jsx(v,{onClick:je,disabled:T||!k,children:T?e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"mr-2 h-4 w-4 animate-spin"}),"Сохранение..."]}):e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"mr-2 h-4 w-4"}),"Сохранить телефон"]})})]})]})]}),e.jsxs(O,{value:"notifications",className:"space-y-4",children:[e.jsx(ze,{}),e.jsx($e,{}),e.jsxs(d,{children:[e.jsxs(m,{children:[e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"5",y:"2",width:"14",height:"20",rx:"2",ry:"2"}),e.jsx("line",{x1:"12",y1:"18",x2:"12.01",y2:"18"})]}),"Установить приложение"]}),e.jsx(x,{children:"Добавьте Waves на главный экран для быстрого доступа"})]}),e.jsx(j,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-3 text-sm text-muted-foreground",children:[e.jsx("p",{className:"font-medium text-foreground",children:"На iPhone / iPad:"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-2 ml-2",children:[e.jsx("li",{children:"Откройте сайт в Safari"}),e.jsx("li",{children:"Нажмите кнопку «Поделиться» (квадрат со стрелкой вверх внизу экрана)"}),e.jsx("li",{children:"Пролистайте вниз и нажмите «На экран Домой»"}),e.jsx("li",{children:"Нажмите «Добавить»"})]}),e.jsx("p",{className:"font-medium text-foreground pt-2",children:"На Android:"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-2 ml-2",children:[e.jsx("li",{children:"Откройте сайт в Chrome"}),e.jsx("li",{children:"Нажмите три точки в правом верхнем углу"}),e.jsx("li",{children:"Выберите «Добавить на главный экран» или «Установить приложение»"}),e.jsx("li",{children:"Подтвердите установку"})]}),e.jsx("p",{className:"pt-2 text-xs",children:"После установки приложение будет работать как обычное приложение на вашем телефоне."})]})})]}),e.jsxs(d,{children:[e.jsxs(m,{children:[e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-5 w-5"}),"Email-уведомления"]}),e.jsx(x,{children:"Уведомления на электронную почту"})]}),e.jsxs(j,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(S,{children:"Маркетинговые рассылки"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Новости, акции и полезные материалы"})]}),e.jsx(W,{checked:D,onCheckedChange:V})]}),e.jsx(Te,{}),e.jsx(v,{onClick:ge,disabled:q,children:q?e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"mr-2 h-4 w-4 animate-spin"}),"Сохранение..."]}):e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"mr-2 h-4 w-4"}),"Сохранить настройки"]})})]})]})]}),e.jsxs(O,{value:"security",className:"space-y-4",children:[e.jsxs(d,{children:[e.jsxs(m,{children:[e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-5 w-5"}),"Изменение пароля"]}),e.jsx(x,{children:"Измените пароль для входа в аккаунт"})]}),e.jsxs(j,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"new-password",children:"Новый пароль"}),e.jsx(M,{id:"new-password",type:"password",value:r,onChange:a=>N(a.target.value),placeholder:"Минимум 8 символов"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"confirm-password",children:"Подтвердите пароль"}),e.jsx(M,{id:"confirm-password",type:"password",value:E,onChange:a=>g(a.target.value),placeholder:"Повторите новый пароль"})]}),e.jsx(v,{onClick:ue,disabled:U||!r||!E,children:U?e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"mr-2 h-4 w-4 animate-spin"}),"Сохранение..."]}):"Изменить пароль"})]})]}),e.jsxs(d,{children:[e.jsxs(m,{children:[e.jsx(h,{children:"Выход из аккаунта"}),e.jsx(x,{children:"Завершить текущую сессию"})]}),e.jsx(j,{children:e.jsx(v,{variant:"destructive",onClick:()=>{p(),s("/")},children:"Выйти из аккаунта"})})]})]}),e.jsxs(O,{value:"region",className:"space-y-4",children:[e.jsxs(d,{children:[e.jsxs(m,{children:[e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"h-5 w-5"}),"Регион"]}),e.jsx(x,{children:"Ваше местоположение для подбора специалистов"})]}),e.jsx(j,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"region",children:"Регион проживания"}),e.jsxs(se,{value:Z,onValueChange:G,children:[e.jsx(ae,{id:"region",children:e.jsx(te,{placeholder:"Выберите регион"})}),e.jsx(ie,{children:Be.map(a=>e.jsx(re,{value:a,children:a},a))})]})]})})]}),e.jsxs(d,{children:[e.jsxs(m,{children:[e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(Ce,{className:"h-5 w-5"}),"Часовой пояс"]}),e.jsx(x,{children:"Время консультаций будет отображаться в вашем часовом поясе"})]}),e.jsxs(j,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"timezone",children:"Часовой пояс"}),e.jsxs(se,{value:Y,onValueChange:J,children:[e.jsx(ae,{id:"timezone",children:e.jsx(te,{placeholder:"Выберите часовой пояс"})}),e.jsx(ie,{children:Fe.map(a=>e.jsx(re,{value:a.value,children:a.label},a.value))})]})]}),e.jsx(v,{onClick:pe,disabled:K,children:K?e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"mr-2 h-4 w-4 animate-spin"}),"Сохранение..."]}):e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"mr-2 h-4 w-4"}),"Сохранить настройки"]})})]})]})]})]})]})}export{hs as default};
