import{b as a}from"./vendor-query-DNK10Tnx.js";import{w as n,p as o}from"./index-BetUtCwY.js";import"./profileStorage-Bslow6L6.js";async function s(){try{const{data:e,error:r}=await n.from("packages").select(`
        *,
        appointment_type:appointment_types(*)
      `).eq("is_active",!0).order("session_count",{ascending:!0});if(r)throw r;return(e||[]).map(t=>({...t,appointment_type:t.appointment_type}))}catch(e){throw o.error("Error getting packages with type:",e),e}}async function c(e){try{const{data:r,error:t}=await n.from("packages").select("*").eq("id",e).single();if(t){if(t.code==="PGRST116")return null;throw t}return r}catch(r){return o.error("Error getting package:",r),null}}async function i(e){try{const{data:r,error:t}=await n.from("package_purchases").select("*").eq("id",e).single();if(t){if(t.code==="PGRST116")return null;throw t}return r}catch(r){return o.error("Error getting package purchase:",r),null}}function p(){return a({queryKey:["packages-with-type"],queryFn:s,staleTime:10*60*1e3,gcTime:30*60*1e3,retry:2,refetchOnWindowFocus:!1})}function y(e){return a({queryKey:["package",e],queryFn:()=>e?c(e):Promise.resolve(null),enabled:!!e,staleTime:10*60*1e3,gcTime:30*60*1e3,retry:2,refetchOnWindowFocus:!1})}function f(e){return a({queryKey:["package-purchase",e],queryFn:()=>e?i(e):Promise.resolve(null),enabled:!!e,staleTime:2*60*1e3,gcTime:5*60*1e3,retry:2,refetchOnWindowFocus:!1})}export{y as a,f as b,p as u};
