import{b as l}from"./vendor-query-DNK10Tnx.js";import{w as n}from"./index-BetUtCwY.js";function g(u={}){const{category:s,limit:t,excludeSlug:r,enabled:a=!0}=u;return l({queryKey:["blog-posts",{category:s,limit:t,excludeSlug:r}],enabled:a,staleTime:0,gcTime:0,refetchOnMount:"always",refetchOnWindowFocus:!0,queryFn:async()=>{let e=n.from("blog_posts").select("*").eq("status","published").lte("published_at",new Date().toISOString()).order("published_at",{ascending:!1});s&&(e=e.eq("category_slug",s)),r&&(e=e.neq("slug",r)),t&&t>0&&(e=e.limit(t));const{data:i,error:o}=await e;if(o)throw o;return i||[]}})}export{g as u};
